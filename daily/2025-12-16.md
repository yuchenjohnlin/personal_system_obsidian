

### TO DO
1. Add expense list 

### Thoughts
Grok gave me several answers after I showed my doubt for the system. He said that there is money coming into this field, meaning that people are interested in OCR for receipts. They have their own understanding, but at least people are truly interested, maybe regarding business receipts and all that. Anyways, I can continue working on this, but it is pretty competitive and I might have to make some decisions when building the ML pipeline and all that because the timing is also important.
I think there are several levels when designing the UI. 
1. People just want to track the purchases
	- Maybe have to let final purchase be editable by user
2. People don't care about the details of each expense, just want to know the price, maybe the final price ? do they care about the tax and tip ? 


# **Expense App – Design Consensus Summary**
## **1. Core Mental Model (Most Important)**
**Users do NOT think in “database objects”.**
**They think in spending events.**
- “I spent $23.50 at Trader Joe’s”
- “I paid $18.40 for Uber”
- “I had dinner with friends”
The app must reflect this mental model.
---
## **2. Backend Model (Keep This)**
The backend structure is **correct and should not be removed**:
```
Purchase (container / event)
 ├─ time
 ├─ merchant / location
 ├─ receipt-level discounts
 └─ expenses (1 or more)
      ├─ price
      ├─ optional product
      ├─ optional tax / tip
      └─ optional detail metadata
```
Why Purchase exists:
- Receipt-wide discounts
- Tax / tip on subtotal
- OCR grouping
- Real-world accounting correctness
**Do not collapse expense into purchase in the backend.**
## **3. UI Mental Model (Reframe This)**
In the UI:

| **Backend** | **UI Concept**            |
| ----------- | ------------------------- |
| Purchase    | **Spending Event**        |
| Expense     | **Breakdown / line item** |
The UI should **hide structure until it matters**.
## **4. Default User Experience**
### **Single-expense case (most common)**
What user sees:
`Trader Joe’s · Today        $23.50`
What actually exists:
- 1 Purchase
- 1 Expense
The expense is **implicit**.
### **Expanded view or multiple expenses**
```
Trader Joe’s · Today        $45.10
---------------------------------
Chicken             $23.50
Vegetables          $21.60
---------------------------------
Receipt discount    -$1.00
Tax                  $1.00
```
Now the container (Purchase) becomes meaningful.
## **5. Input Philosophy**
### **Fast path (quick entry)**
- User enters **one price**
- No product, tax, tip required
- This creates:
    - 1 Purchase
    - 1 Expense
### **Detailed path (optional)**
- User expands event
- Adds multiple expenses
- Adds product names, tax, tip, discount
**Never force detail entry.**
## **6. “Final Price” Strategy**
### **Expense:**
- No stored final_price
- Final price = computed:
`price + tax + tip`
### **Purchase:**
- final_price is derived:
`sum(expense final prices) ± receipt discounts`
Backend is authoritative for totals.

## **7. Location / Title Clarification**
- Location is **important but not always primary**
- Users think in **events**, not merchants
Recommended UI framing:
- Show **Title / Description** first
- Merchant/location is metadata
Examples:
- “Trader Joe’s groceries”
- “Uber to airport”
- “Dinner with friends”
Backend can still store location.
## **8. Progressive Disclosure Principle**
**Only show complexity when needed.**
- One expense → simple row
- Multiple expenses → breakdown
- Discounts → hidden until relevant
- Product names → optional
This avoids overwhelming users.
## **9. Discount & Unit Handling**
- Store value + type separately:
    - value
    - kind = amount | percent
- UI toggle switches meaning, not format
- Autosave + debounce for numeric input
- Toggle does NOT need debounce
Visual polish can be added later.
---
## **10. What NOT to Do**
❌ Do not:
- Remove Purchase
- Store price sometimes on purchase, sometimes on expense
- Force product names
- Expose all fields by default
- Hardcode UI around database structure